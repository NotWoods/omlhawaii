function getElements(){var e=document.getElementById("aside"),t=document.getElementsByClassName("arrow");projectPage=document.getElementById("project-page"),t[0].addEventListener("click",buttonClick),t[1].addEventListener("click",buttonClick),aside.name=e.children[0],aside.scope=e.children[2],aside.contractor=e.children[4],aside.architect=e.children[6],openProject(location.hash)}function parsePage(e){for(var t=e.split("\n").map(function(e){return e.trim()}),n=t.lastIndexOf("---"),a={},o=t.splice(n,t.length-n),r=0;r<t.length;r++){var c=t[r],i=c.indexOf(":");-1!=i&&(a[c.substring(0,i).trim()]=c.substring(i+1,c.length).trim())}return o.splice(0,1),{metadata:a,images:o}}function insertImages(e){for(var t=document.createDocumentFragment();projectPage.firstChild;)projectPage.removeChild(projectPage.firstChild);for(var n=0;n<e.length;n++){var a=document.createElement("img");a.src=e[n],t.appendChild(a)}projectPage.appendChild(t)}function insertData(e){aside.name.textContent=e.name,aside.scope.textContent=e.scope,aside.contractor.textContent=e.contractor,aside.architect.textContent=e.architect}function classToNum(e){return parseInt(e.substring(e.indexOf("s")+1,e.length))}function numToClass(e){return"view-project s"+e.toString()}function buttonClick(){var e=classToNum(projectPage.className),t=projectPage.childElementCount,n=1;this.className.indexOf("left-")>-1&&(n=-1),1>e+n||e+n>t||(projectPage.className=numToClass(e+n))}function openProject(e){if(-1!=location.hash.indexOf("gallery")){for(var t=e.substring(1,location.hash.indexOf("-gallery"));projectPage.firstChild;)projectPage.removeChild(projectPage.firstChild);projectPage.className=numToClass(1);var n=new XMLHttpRequest;n.onload=function(){var e=parsePage(this.responseText);insertData(e.metadata),insertImages(e.images)},n.open("GET","/prj/"+t+".yaml",!0),n.send()}}var aside={name:null,scope:null,contractor:null,architect:null},projectPage;window.onhashchange=function(){openProject(location.hash)},"interactive"==document.body.readyState||"complete"==document.body.readyState?getElements():document.body.onload=getElements;